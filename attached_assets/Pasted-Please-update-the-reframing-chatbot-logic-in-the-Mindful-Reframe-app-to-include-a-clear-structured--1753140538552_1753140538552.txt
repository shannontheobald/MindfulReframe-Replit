Please update the reframing chatbot logic in the Mindful Reframe app to include a clear, structured "end state" and pacing logic.

ðŸŽ¯ Current Problem:
The chatbot currently loops infinitely once a user selects a distorted thought, with no signal to conclude or move forward.

âœ… New Desired Behavior:
Add pacing and closure using this structure:

---

ðŸ” Reframing Turn Structure:

- Each user-thought pairing (one distortion) allows a **maximum of 12 total exchanges** (i.e., 6 user messages and 6 bot replies).
- After **every 3 full back-and-forths** (3 user messages + 3 bot replies), prompt the user with this message:

> â€œWould you like to keep working on this thought, try a different one, or move on to your visualization?â€
> 
> 
> **A)** Keep Reframing
> 
> **B)** Reframe a Different Thought
> 
> **C)** Create Visualization
> 

---

ðŸ“Œ Decision Logic:

- If user selects A â†’ continue chat (if still < 12 total exchanges)
- If user selects B â†’ return to list of remaining distorted thoughts
- If user selects C â†’ end the chat and generate visualization
- If user reaches 12 exchanges, **automatically conclude** the reframe for that thought and show the wrap-up, then offer options B and C only.

---

ðŸ“‹ Reframing Summary (on exit from each thought):
Display a gentle summary card containing:

- **Original Thought** (user input)
- **Detected Distortion** (e.g., catastrophizing)
- **Final Reframed Belief** (summary of userâ€™s positive replies.)
- Optional message:*â€œYouâ€™ve done great work on this thought - Hereâ€™s what youâ€™re learning to believe instead.â€*

Save this summary card to `session.reframes[]` for session history.

---

ðŸ§  Additional Notes:

- Use a calming and affirming tone throughout
- Track number of exchanges using `flow.state.reframeTurns`
- Track completed thoughts using `flow.state.reframedThoughts[]`
- If only one distortion remains, skip option B and just show A / C

---

Example End-of-Thought Message (after 12 turns or user exits):

> â€œYouâ€™ve put thoughtful energy into shifting this belief. Letâ€™s take a moment to reflect, then decide if youâ€™d like to go deeper or move forward.â€
> 

---

Thank you! Please implement this first for the reframing chatbot and ensure it links cleanly to the visualization step.